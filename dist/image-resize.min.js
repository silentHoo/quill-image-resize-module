(()=>{var ts=Object.create;var be=Object.defineProperty;var rs=Object.getOwnPropertyDescriptor;var is=Object.getOwnPropertyNames;var ss=Object.getPrototypeOf,os=Object.prototype.hasOwnProperty;var i=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ns=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of is(t))!os.call(e,o)&&o!==r&&be(e,o,{get:()=>t[o],enumerable:!(s=rs(t,o))||s.enumerable});return e};var as=(e,t,r)=>(r=e!=null?ts(ss(e)):{},ns(t||!e||!e.__esModule?be(r,"default",{value:e,enumerable:!0}):r,e));var Q=i((sp,me)=>{function us(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}me.exports=us});var V=i((op,xe)=>{function ls(e){return e}xe.exports=ls});var Oe=i((np,_e)=>{var ps=Q(),qe=Math.max;function cs(e,t,r){return t=qe(t===void 0?e.length-1:t,0),function(){for(var s=arguments,o=-1,a=qe(s.length-t,0),u=Array(a);++o<a;)u[o]=s[t+o];o=-1;for(var n=Array(t+1);++o<t;)n[o]=s[o];return n[t]=r(u),ps(e,this,n)}}_e.exports=cs});var Ce=i((ap,we)=>{function hs(e){return function(){return e}}we.exports=hs});var J=i((up,Se)=>{var ds=typeof global=="object"&&global&&global.Object===Object&&global;Se.exports=ds});var g=i((lp,Te)=>{var fs=J(),gs=typeof self=="object"&&self&&self.Object===Object&&self,ys=fs||gs||Function("return this")();Te.exports=ys});var Y=i((pp,je)=>{var vs=g(),bs=vs.Symbol;je.exports=bs});var Ee=i((cp,Pe)=>{var Ae=Y(),Ie=Object.prototype,ms=Ie.hasOwnProperty,xs=Ie.toString,S=Ae?Ae.toStringTag:void 0;function qs(e){var t=ms.call(e,S),r=e[S];try{e[S]=void 0;var s=!0}catch{}var o=xs.call(e);return s&&(t?e[S]=r:delete e[S]),o}Pe.exports=qs});var De=i((hp,Me)=>{var _s=Object.prototype,Os=_s.toString;function ws(e){return Os.call(e)}Me.exports=ws});var T=i((dp,Ue)=>{var Be=Y(),Cs=Ee(),Ss=De(),Ts="[object Null]",js="[object Undefined]",Le=Be?Be.toStringTag:void 0;function As(e){return e==null?e===void 0?js:Ts:Le&&Le in Object(e)?Cs(e):Ss(e)}Ue.exports=As});var d=i((fp,ze)=>{function Is(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}ze.exports=Is});var z=i((gp,Fe)=>{var Ps=T(),Es=d(),Ms="[object AsyncFunction]",Ds="[object Function]",Bs="[object GeneratorFunction]",Ls="[object Proxy]";function Us(e){if(!Es(e))return!1;var t=Ps(e);return t==Ds||t==Bs||t==Ms||t==Ls}Fe.exports=Us});var Re=i((yp,Ne)=>{var zs=g(),Fs=zs["__core-js_shared__"];Ne.exports=Fs});var ke=i((vp,He)=>{var Z=Re(),Ge=function(){var e=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Ns(e){return!!Ge&&Ge in e}He.exports=Ns});var Ke=i((bp,$e)=>{var Rs=Function.prototype,Gs=Rs.toString;function Hs(e){if(e!=null){try{return Gs.call(e)}catch{}try{return e+""}catch{}}return""}$e.exports=Hs});var Xe=i((mp,We)=>{var ks=z(),$s=ke(),Ks=d(),Ws=Ke(),Xs=/[\\^$.*+?()[\]{}|]/g,Qs=/^\[object .+?Constructor\]$/,Vs=Function.prototype,Js=Object.prototype,Ys=Vs.toString,Zs=Js.hasOwnProperty,eo=RegExp("^"+Ys.call(Zs).replace(Xs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function to(e){if(!Ks(e)||$s(e))return!1;var t=ks(e)?eo:Qs;return t.test(Ws(e))}We.exports=to});var Ve=i((xp,Qe)=>{function ro(e,t){return e?.[t]}Qe.exports=ro});var F=i((qp,Je)=>{var io=Xe(),so=Ve();function oo(e,t){var r=so(e,t);return io(r)?r:void 0}Je.exports=oo});var ee=i((_p,Ye)=>{var no=F(),ao=function(){try{var e=no(Object,"defineProperty");return e({},"",{}),e}catch{}}();Ye.exports=ao});var tt=i((Op,et)=>{var uo=Ce(),Ze=ee(),lo=V(),po=Ze?function(e,t){return Ze(e,"toString",{configurable:!0,enumerable:!1,value:uo(t),writable:!0})}:lo;et.exports=po});var it=i((wp,rt)=>{var co=800,ho=16,fo=Date.now;function go(e){var t=0,r=0;return function(){var s=fo(),o=ho-(s-r);if(r=s,o>0){if(++t>=co)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}rt.exports=go});var ot=i((Cp,st)=>{var yo=tt(),vo=it(),bo=vo(yo);st.exports=bo});var te=i((Sp,nt)=>{var mo=V(),xo=Oe(),qo=ot();function _o(e,t){return qo(xo(e,t,mo),e+"")}nt.exports=_o});var ut=i((Tp,at)=>{function Oo(){this.__data__=[],this.size=0}at.exports=Oo});var j=i((jp,lt)=>{function wo(e,t){return e===t||e!==e&&t!==t}lt.exports=wo});var A=i((Ap,pt)=>{var Co=j();function So(e,t){for(var r=e.length;r--;)if(Co(e[r][0],t))return r;return-1}pt.exports=So});var ht=i((Ip,ct)=>{var To=A(),jo=Array.prototype,Ao=jo.splice;function Io(e){var t=this.__data__,r=To(t,e);if(r<0)return!1;var s=t.length-1;return r==s?t.pop():Ao.call(t,r,1),--this.size,!0}ct.exports=Io});var ft=i((Pp,dt)=>{var Po=A();function Eo(e){var t=this.__data__,r=Po(t,e);return r<0?void 0:t[r][1]}dt.exports=Eo});var yt=i((Ep,gt)=>{var Mo=A();function Do(e){return Mo(this.__data__,e)>-1}gt.exports=Do});var bt=i((Mp,vt)=>{var Bo=A();function Lo(e,t){var r=this.__data__,s=Bo(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}vt.exports=Lo});var I=i((Dp,mt)=>{var Uo=ut(),zo=ht(),Fo=ft(),No=yt(),Ro=bt();function y(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}y.prototype.clear=Uo;y.prototype.delete=zo;y.prototype.get=Fo;y.prototype.has=No;y.prototype.set=Ro;mt.exports=y});var qt=i((Bp,xt)=>{var Go=I();function Ho(){this.__data__=new Go,this.size=0}xt.exports=Ho});var Ot=i((Lp,_t)=>{function ko(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}_t.exports=ko});var Ct=i((Up,wt)=>{function $o(e){return this.__data__.get(e)}wt.exports=$o});var Tt=i((zp,St)=>{function Ko(e){return this.__data__.has(e)}St.exports=Ko});var re=i((Fp,jt)=>{var Wo=F(),Xo=g(),Qo=Wo(Xo,"Map");jt.exports=Qo});var P=i((Np,At)=>{var Vo=F(),Jo=Vo(Object,"create");At.exports=Jo});var Et=i((Rp,Pt)=>{var It=P();function Yo(){this.__data__=It?It(null):{},this.size=0}Pt.exports=Yo});var Dt=i((Gp,Mt)=>{function Zo(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}Mt.exports=Zo});var Lt=i((Hp,Bt)=>{var en=P(),tn="__lodash_hash_undefined__",rn=Object.prototype,sn=rn.hasOwnProperty;function on(e){var t=this.__data__;if(en){var r=t[e];return r===tn?void 0:r}return sn.call(t,e)?t[e]:void 0}Bt.exports=on});var zt=i((kp,Ut)=>{var nn=P(),an=Object.prototype,un=an.hasOwnProperty;function ln(e){var t=this.__data__;return nn?t[e]!==void 0:un.call(t,e)}Ut.exports=ln});var Nt=i(($p,Ft)=>{var pn=P(),cn="__lodash_hash_undefined__";function hn(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=pn&&t===void 0?cn:t,this}Ft.exports=hn});var Gt=i((Kp,Rt)=>{var dn=Et(),fn=Dt(),gn=Lt(),yn=zt(),vn=Nt();function v(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}v.prototype.clear=dn;v.prototype.delete=fn;v.prototype.get=gn;v.prototype.has=yn;v.prototype.set=vn;Rt.exports=v});var $t=i((Wp,kt)=>{var Ht=Gt(),bn=I(),mn=re();function xn(){this.size=0,this.__data__={hash:new Ht,map:new(mn||bn),string:new Ht}}kt.exports=xn});var Wt=i((Xp,Kt)=>{function qn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}Kt.exports=qn});var E=i((Qp,Xt)=>{var _n=Wt();function On(e,t){var r=e.__data__;return _n(t)?r[typeof t=="string"?"string":"hash"]:r.map}Xt.exports=On});var Vt=i((Vp,Qt)=>{var wn=E();function Cn(e){var t=wn(this,e).delete(e);return this.size-=t?1:0,t}Qt.exports=Cn});var Yt=i((Jp,Jt)=>{var Sn=E();function Tn(e){return Sn(this,e).get(e)}Jt.exports=Tn});var er=i((Yp,Zt)=>{var jn=E();function An(e){return jn(this,e).has(e)}Zt.exports=An});var rr=i((Zp,tr)=>{var In=E();function Pn(e,t){var r=In(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}tr.exports=Pn});var sr=i((ec,ir)=>{var En=$t(),Mn=Vt(),Dn=Yt(),Bn=er(),Ln=rr();function b(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}b.prototype.clear=En;b.prototype.delete=Mn;b.prototype.get=Dn;b.prototype.has=Bn;b.prototype.set=Ln;ir.exports=b});var nr=i((tc,or)=>{var Un=I(),zn=re(),Fn=sr(),Nn=200;function Rn(e,t){var r=this.__data__;if(r instanceof Un){var s=r.__data__;if(!zn||s.length<Nn-1)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new Fn(s)}return r.set(e,t),this.size=r.size,this}or.exports=Rn});var ur=i((rc,ar)=>{var Gn=I(),Hn=qt(),kn=Ot(),$n=Ct(),Kn=Tt(),Wn=nr();function m(e){var t=this.__data__=new Gn(e);this.size=t.size}m.prototype.clear=Hn;m.prototype.delete=kn;m.prototype.get=$n;m.prototype.has=Kn;m.prototype.set=Wn;ar.exports=m});var N=i((ic,pr)=>{var lr=ee();function Xn(e,t,r){t=="__proto__"&&lr?lr(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}pr.exports=Xn});var ie=i((sc,cr)=>{var Qn=N(),Vn=j();function Jn(e,t,r){(r!==void 0&&!Vn(e[t],r)||r===void 0&&!(t in e))&&Qn(e,t,r)}cr.exports=Jn});var dr=i((oc,hr)=>{function Yn(e){return function(t,r,s){for(var o=-1,a=Object(t),u=s(t),n=u.length;n--;){var p=u[e?n:++o];if(r(a[p],p,a)===!1)break}return t}}hr.exports=Yn});var gr=i((nc,fr)=>{var Zn=dr(),ea=Zn();fr.exports=ea});var xr=i((M,x)=>{var ta=g(),mr=typeof M=="object"&&M&&!M.nodeType&&M,yr=mr&&typeof x=="object"&&x&&!x.nodeType&&x,ra=yr&&yr.exports===mr,vr=ra?ta.Buffer:void 0,br=vr?vr.allocUnsafe:void 0;function ia(e,t){if(t)return e.slice();var r=e.length,s=br?br(r):new e.constructor(r);return e.copy(s),s}x.exports=ia});var _r=i((ac,qr)=>{var sa=g(),oa=sa.Uint8Array;qr.exports=oa});var Cr=i((uc,wr)=>{var Or=_r();function na(e){var t=new e.constructor(e.byteLength);return new Or(t).set(new Or(e)),t}wr.exports=na});var Tr=i((lc,Sr)=>{var aa=Cr();function ua(e,t){var r=t?aa(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}Sr.exports=ua});var Ar=i((pc,jr)=>{function la(e,t){var r=-1,s=e.length;for(t||(t=Array(s));++r<s;)t[r]=e[r];return t}jr.exports=la});var Er=i((cc,Pr)=>{var pa=d(),Ir=Object.create,ca=function(){function e(){}return function(t){if(!pa(t))return{};if(Ir)return Ir(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();Pr.exports=ca});var Dr=i((hc,Mr)=>{function ha(e,t){return function(r){return e(t(r))}}Mr.exports=ha});var se=i((dc,Br)=>{var da=Dr(),fa=da(Object.getPrototypeOf,Object);Br.exports=fa});var oe=i((fc,Lr)=>{var ga=Object.prototype;function ya(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||ga;return e===r}Lr.exports=ya});var zr=i((gc,Ur)=>{var va=Er(),ba=se(),ma=oe();function xa(e){return typeof e.constructor=="function"&&!ma(e)?va(ba(e)):{}}Ur.exports=xa});var q=i((yc,Fr)=>{function qa(e){return e!=null&&typeof e=="object"}Fr.exports=qa});var Rr=i((vc,Nr)=>{var _a=T(),Oa=q(),wa="[object Arguments]";function Ca(e){return Oa(e)&&_a(e)==wa}Nr.exports=Ca});var ne=i((bc,kr)=>{var Gr=Rr(),Sa=q(),Hr=Object.prototype,Ta=Hr.hasOwnProperty,ja=Hr.propertyIsEnumerable,Aa=Gr(function(){return arguments}())?Gr:function(e){return Sa(e)&&Ta.call(e,"callee")&&!ja.call(e,"callee")};kr.exports=Aa});var ae=i((mc,$r)=>{var Ia=Array.isArray;$r.exports=Ia});var ue=i((xc,Kr)=>{var Pa=9007199254740991;function Ea(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Pa}Kr.exports=Ea});var R=i((qc,Wr)=>{var Ma=z(),Da=ue();function Ba(e){return e!=null&&Da(e.length)&&!Ma(e)}Wr.exports=Ba});var Qr=i((_c,Xr)=>{var La=R(),Ua=q();function za(e){return Ua(e)&&La(e)}Xr.exports=za});var Jr=i((Oc,Vr)=>{function Fa(){return!1}Vr.exports=Fa});var le=i((D,_)=>{var Na=g(),Ra=Jr(),ei=typeof D=="object"&&D&&!D.nodeType&&D,Yr=ei&&typeof _=="object"&&_&&!_.nodeType&&_,Ga=Yr&&Yr.exports===ei,Zr=Ga?Na.Buffer:void 0,Ha=Zr?Zr.isBuffer:void 0,ka=Ha||Ra;_.exports=ka});var ii=i((wc,ri)=>{var $a=T(),Ka=se(),Wa=q(),Xa="[object Object]",Qa=Function.prototype,Va=Object.prototype,ti=Qa.toString,Ja=Va.hasOwnProperty,Ya=ti.call(Object);function Za(e){if(!Wa(e)||$a(e)!=Xa)return!1;var t=Ka(e);if(t===null)return!0;var r=Ja.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&ti.call(r)==Ya}ri.exports=Za});var oi=i((Cc,si)=>{var eu=T(),tu=ue(),ru=q(),iu="[object Arguments]",su="[object Array]",ou="[object Boolean]",nu="[object Date]",au="[object Error]",uu="[object Function]",lu="[object Map]",pu="[object Number]",cu="[object Object]",hu="[object RegExp]",du="[object Set]",fu="[object String]",gu="[object WeakMap]",yu="[object ArrayBuffer]",vu="[object DataView]",bu="[object Float32Array]",mu="[object Float64Array]",xu="[object Int8Array]",qu="[object Int16Array]",_u="[object Int32Array]",Ou="[object Uint8Array]",wu="[object Uint8ClampedArray]",Cu="[object Uint16Array]",Su="[object Uint32Array]",l={};l[bu]=l[mu]=l[xu]=l[qu]=l[_u]=l[Ou]=l[wu]=l[Cu]=l[Su]=!0;l[iu]=l[su]=l[yu]=l[ou]=l[vu]=l[nu]=l[au]=l[uu]=l[lu]=l[pu]=l[cu]=l[hu]=l[du]=l[fu]=l[gu]=!1;function Tu(e){return ru(e)&&tu(e.length)&&!!l[eu(e)]}si.exports=Tu});var ai=i((Sc,ni)=>{function ju(e){return function(t){return e(t)}}ni.exports=ju});var li=i((B,O)=>{var Au=J(),ui=typeof B=="object"&&B&&!B.nodeType&&B,L=ui&&typeof O=="object"&&O&&!O.nodeType&&O,Iu=L&&L.exports===ui,pe=Iu&&Au.process,Pu=function(){try{var e=L&&L.require&&L.require("util").types;return e||pe&&pe.binding&&pe.binding("util")}catch{}}();O.exports=Pu});var ce=i((Tc,hi)=>{var Eu=oi(),Mu=ai(),pi=li(),ci=pi&&pi.isTypedArray,Du=ci?Mu(ci):Eu;hi.exports=Du});var he=i((jc,di)=>{function Bu(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}di.exports=Bu});var gi=i((Ac,fi)=>{var Lu=N(),Uu=j(),zu=Object.prototype,Fu=zu.hasOwnProperty;function Nu(e,t,r){var s=e[t];(!(Fu.call(e,t)&&Uu(s,r))||r===void 0&&!(t in e))&&Lu(e,t,r)}fi.exports=Nu});var vi=i((Ic,yi)=>{var Ru=gi(),Gu=N();function Hu(e,t,r,s){var o=!r;r||(r={});for(var a=-1,u=t.length;++a<u;){var n=t[a],p=s?s(r[n],e[n],n,r,e):void 0;p===void 0&&(p=e[n]),o?Gu(r,n,p):Ru(r,n,p)}return r}yi.exports=Hu});var mi=i((Pc,bi)=>{function ku(e,t){for(var r=-1,s=Array(e);++r<e;)s[r]=t(r);return s}bi.exports=ku});var de=i((Ec,xi)=>{var $u=9007199254740991,Ku=/^(?:0|[1-9]\d*)$/;function Wu(e,t){var r=typeof e;return t=t??$u,!!t&&(r=="number"||r!="symbol"&&Ku.test(e))&&e>-1&&e%1==0&&e<t}xi.exports=Wu});var _i=i((Mc,qi)=>{var Xu=mi(),Qu=ne(),Vu=ae(),Ju=le(),Yu=de(),Zu=ce(),el=Object.prototype,tl=el.hasOwnProperty;function rl(e,t){var r=Vu(e),s=!r&&Qu(e),o=!r&&!s&&Ju(e),a=!r&&!s&&!o&&Zu(e),u=r||s||o||a,n=u?Xu(e.length,String):[],p=n.length;for(var h in e)(t||tl.call(e,h))&&!(u&&(h=="length"||o&&(h=="offset"||h=="parent")||a&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||Yu(h,p)))&&n.push(h);return n}qi.exports=rl});var wi=i((Dc,Oi)=>{function il(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}Oi.exports=il});var Si=i((Bc,Ci)=>{var sl=d(),ol=oe(),nl=wi(),al=Object.prototype,ul=al.hasOwnProperty;function ll(e){if(!sl(e))return nl(e);var t=ol(e),r=[];for(var s in e)s=="constructor"&&(t||!ul.call(e,s))||r.push(s);return r}Ci.exports=ll});var fe=i((Lc,Ti)=>{var pl=_i(),cl=Si(),hl=R();function dl(e){return hl(e)?pl(e,!0):cl(e)}Ti.exports=dl});var Ai=i((Uc,ji)=>{var fl=vi(),gl=fe();function yl(e){return fl(e,gl(e))}ji.exports=yl});var Bi=i((zc,Di)=>{var Ii=ie(),vl=xr(),bl=Tr(),ml=Ar(),xl=zr(),Pi=ne(),Ei=ae(),ql=Qr(),_l=le(),Ol=z(),wl=d(),Cl=ii(),Sl=ce(),Mi=he(),Tl=Ai();function jl(e,t,r,s,o,a,u){var n=Mi(e,r),p=Mi(t,r),h=u.get(p);if(h){Ii(e,r,h);return}var c=a?a(n,p,r+"",e,t,u):void 0,C=c===void 0;if(C){var W=Ei(p),X=!W&&_l(p),ve=!W&&!X&&Sl(p);c=p,W||X||ve?Ei(n)?c=n:ql(n)?c=ml(n):X?(C=!1,c=vl(p,!0)):ve?(C=!1,c=bl(p,!0)):c=[]:Cl(p)||Pi(p)?(c=n,Pi(n)?c=Tl(n):(!wl(n)||Ol(n))&&(c=xl(p))):C=!1}C&&(u.set(p,c),o(c,p,s,a,u),u.delete(p)),Ii(e,r,c)}Di.exports=jl});var ge=i((Fc,Ui)=>{var Al=ur(),Il=ie(),Pl=gr(),El=Bi(),Ml=d(),Dl=fe(),Bl=he();function Li(e,t,r,s,o){e!==t&&Pl(t,function(a,u){if(o||(o=new Al),Ml(a))El(e,t,u,r,Li,s,o);else{var n=s?s(Bl(e,u),a,u+"",e,t,o):void 0;n===void 0&&(n=a),Il(e,u,n)}},Dl)}Ui.exports=Li});var Ri=i((Nc,Ni)=>{var Ll=ge(),zi=d();function Fi(e,t,r,s,o,a){return zi(e)&&zi(t)&&(a.set(t,e),Ll(e,t,void 0,Fi,a),a.delete(t)),e}Ni.exports=Fi});var Hi=i((Rc,Gi)=>{var Ul=j(),zl=R(),Fl=de(),Nl=d();function Rl(e,t,r){if(!Nl(r))return!1;var s=typeof t;return(s=="number"?zl(r)&&Fl(t,r.length):s=="string"&&t in r)?Ul(r[t],e):!1}Gi.exports=Rl});var $i=i((Gc,ki)=>{var Gl=te(),Hl=Hi();function kl(e){return Gl(function(t,r){var s=-1,o=r.length,a=o>1?r[o-1]:void 0,u=o>2?r[2]:void 0;for(a=e.length>3&&typeof a=="function"?(o--,a):void 0,u&&Hl(r[0],r[1],u)&&(a=o<3?void 0:a,o=1),t=Object(t);++s<o;){var n=r[s];n&&e(t,n,s,a)}return t})}ki.exports=kl});var Wi=i((Hc,Ki)=>{var $l=ge(),Kl=$i(),Wl=Kl(function(e,t,r,s){$l(e,t,r,s)});Ki.exports=Wl});var Qi=i((kc,Xi)=>{var Xl=Q(),Ql=te(),Vl=Ri(),Jl=Wi(),Yl=Ql(function(e){return e.push(void 0,Vl),Xl(Jl,void 0,e)});Xi.exports=Yl});var es=as(Qi());var Vi={modules:["DisplaySize","Toolbar","Resize"],overlayStyles:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"},handleStyles:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"},displayStyles:{position:"absolute",font:"12px/1.0 Arial, Helvetica, sans-serif",padding:"4px 8px",textAlign:"center",backgroundColor:"white",color:"#333",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",cursor:"default"},toolbarStyles:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default"},toolbarButtonStyles:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"},toolbarButtonSvgStyles:{fill:"#444",stroke:"#444",strokeWidth:"2"}};var f=class{constructor(t){this.overlay=t.overlay,this.img=t.img,this.options=t.options,this.requestUpdate=t.onUpdate}onCreate=()=>{};onDestroy=()=>{};onUpdate=()=>{}};var G=class extends f{onCreate=()=>{this.display=document.createElement("div"),Object.assign(this.display.style,this.options.displayStyles),this.overlay.appendChild(this.display)};onDestroy=()=>{};onUpdate=()=>{if(!this.display||!this.img)return;let t=this.getCurrentSize();if(this.display.innerHTML=t.join(" &times; "),t[0]>120&&t[1]>30)Object.assign(this.display.style,{right:"4px",bottom:"4px",left:"auto"});else if(this.img.style.float=="right"){let r=this.display.getBoundingClientRect();Object.assign(this.display.style,{right:"auto",bottom:`-${r.height+4}px`,left:`-${r.width+4}px`})}else{let r=this.display.getBoundingClientRect();Object.assign(this.display.style,{right:`-${r.width+4}px`,bottom:`-${r.height+4}px`,left:"auto"})}};getCurrentSize=()=>[this.img.width,Math.round(this.img.width/this.img.naturalWidth*this.img.naturalHeight)]};var H=class extends f{onCreate=()=>{this.boxes=[],this.addBox("nwse-resize"),this.addBox("nesw-resize"),this.addBox("nwse-resize"),this.addBox("nesw-resize"),this.positionBoxes()};onDestroy=()=>{this.setCursor("")};positionBoxes=()=>{let t=`${-parseFloat(this.options.handleStyles.width)/2}px`,r=`${-parseFloat(this.options.handleStyles.height)/2}px`;[{left:t,top:r},{right:t,top:r},{right:t,bottom:r},{left:t,bottom:r}].forEach((s,o)=>{Object.assign(this.boxes[o].style,s)})};addBox=t=>{let r=document.createElement("div");Object.assign(r.style,this.options.handleStyles),r.style.cursor=t,r.style.width=`${this.options.handleStyles.width}px`,r.style.height=`${this.options.handleStyles.height}px`,r.addEventListener("mousedown",this.handleMousedown,!1),this.overlay.appendChild(r),this.boxes.push(r)};handleMousedown=t=>{this.dragBox=t.target,this.dragStartX=t.clientX,this.preDragWidth=this.img.width||this.img.naturalWidth,this.setCursor(this.dragBox.style.cursor),document.addEventListener("mousemove",this.handleDrag,!1),document.addEventListener("mouseup",this.handleMouseup,!1)};handleMouseup=()=>{this.setCursor(""),document.removeEventListener("mousemove",this.handleDrag),document.removeEventListener("mouseup",this.handleMouseup)};handleDrag=t=>{if(!this.img)return;let r=t.clientX-this.dragStartX;this.dragBox===this.boxes[0]||this.dragBox===this.boxes[3]?this.img.width=Math.round(this.preDragWidth-r):this.img.width=Math.round(this.preDragWidth+r),this.requestUpdate()};setCursor=t=>{[document.body,this.img].forEach(r=>{r.style.cursor=t})}};var Ji=`<svg viewbox="0 0 18 18">
  <line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"></line>
  <line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"></line>
  <line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"></line>
</svg>`;var Yi=`<svg viewbox="0 0 18 18">
  <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>
  <line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"></line>
  <line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"></line>
</svg>`;var Zi=`<svg viewbox="0 0 18 18">
  <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>
  <line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"></line>
  <line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"></line>
</svg>`;var ye=window.Quill.imports.parchment,w=new ye.Attributor.Style("float","float"),U=new ye.Attributor.Style("margin","margin"),k=new ye.Attributor.Style("display","display"),$=class extends f{onCreate=()=>{this.toolbar=document.createElement("div"),Object.assign(this.toolbar.style,this.options.toolbarStyles),this.overlay.appendChild(this.toolbar),this._defineAlignments(),this._addToolbarButtons()};onDestroy=()=>{};onUpdate=()=>{};_defineAlignments=()=>{this.alignments=[{icon:Ji,apply:()=>{k.add(this.img,"inline"),w.add(this.img,"left"),U.add(this.img,"0 1em 1em 0")},isApplied:()=>w.value(this.img)=="left"},{icon:Yi,apply:()=>{k.add(this.img,"block"),w.remove(this.img),U.add(this.img,"auto")},isApplied:()=>U.value(this.img)=="auto"},{icon:Zi,apply:()=>{k.add(this.img,"inline"),w.add(this.img,"right"),U.add(this.img,"0 0 1em 1em")},isApplied:()=>w.value(this.img)=="right"}]};_addToolbarButtons=()=>{let t=[];this.alignments.forEach((r,s)=>{let o=document.createElement("span");t.push(o),o.innerHTML=r.icon,o.addEventListener("click",()=>{t.forEach(a=>a.style.filter=""),r.isApplied()?(w.remove(this.img),U.remove(this.img),k.remove(this.img)):(this._selectButton(o),r.apply()),this.requestUpdate()}),Object.assign(o.style,this.options.toolbarButtonStyles),s>0&&(o.style.borderLeftWidth="0"),Object.assign(o.children[0].style,this.options.toolbarButtonSvgStyles),r.isApplied()&&this._selectButton(o),this.toolbar.appendChild(o)})};_selectButton=t=>{t.style.filter="invert(20%)"}};var rp={DisplaySize:G,Toolbar:$,Resize:H},K=class{constructor(t,r={}){this.quill=t;let s=!1;r.modules&&(s=r.modules.slice()),this.options=(0,es.default)({},r,Vi),s!==!1&&(this.options.modules=s),this.quill.root.addEventListener("click",this.handleClick,!1),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.moduleClasses=this.options.modules,this.modules=[]}initializeModules=()=>{this.removeModules(),this.modules=this.moduleClasses.map(t=>new(rp[t]||t)(this)),this.modules.forEach(t=>{t.onCreate()}),this.onUpdate()};onUpdate=()=>{this.repositionElements(),this.modules.forEach(t=>{t.onUpdate()})};removeModules=()=>{this.modules.forEach(t=>{t.onDestroy()}),this.modules=[]};handleClick=t=>{if(t.target&&t.target.tagName&&t.target.tagName.toUpperCase()==="IMG"){if(this.img===t.target)return;this.img&&this.hide(),this.show(t.target)}else this.img&&this.hide()};show=t=>{this.img=t,this.showOverlay(),this.initializeModules()};showOverlay=()=>{this.overlay&&this.hideOverlay(),this.quill.setSelection(null),this.setUserSelect("none"),document.addEventListener("keyup",this.checkImage,!0),this.quill.root.addEventListener("input",this.checkImage,!0),this.overlay=document.createElement("div"),Object.assign(this.overlay.style,this.options.overlayStyles),this.quill.root.parentNode.appendChild(this.overlay),this.repositionElements()};hideOverlay=()=>{this.overlay&&(this.quill.root.parentNode.removeChild(this.overlay),this.overlay=void 0,document.removeEventListener("keyup",this.checkImage),this.quill.root.removeEventListener("input",this.checkImage),this.setUserSelect(""))};repositionElements=()=>{if(!this.overlay||!this.img)return;let t=this.quill.root.parentNode,r=this.img.getBoundingClientRect(),s=t.getBoundingClientRect();Object.assign(this.overlay.style,{left:`${r.left-s.left-1+t.scrollLeft}px`,top:`${r.top-s.top+t.scrollTop}px`,width:`${r.width}px`,height:`${r.height}px`})};hide=()=>{this.hideOverlay(),this.removeModules(),this.img=void 0};setUserSelect=t=>{["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach(r=>{this.quill.root.style[r]=t,document.documentElement.style[r]=t})};copyImageToClipboard=()=>{let t=document.createElement("canvas"),r=t.getContext("2d");return t.width=this.img.naturalWidth,t.height=this.img.naturalHeight,r.drawImage(this.img,0,0),new Promise((s,o)=>{t.toBlob(async function(a){let u=new ClipboardItem({[a.type]:a});navigator.clipboard.write([u]).then(function(){console.log("Image added to clipboard, type: "+a.type),s(!0)}).catch(function(n){alert("Error adding image to clipboard: "+n.name+" -> "+n.message),o()})})})};checkImage=async t=>{this.img&&((t.keyCode==46||t.keyCode==8)&&(this.deleteImage(this.img),this.hide()),(t.ctrlKey||t.metaKey)&&t.key==="c"&&(t.preventDefault(),this.copyImageToClipboard()),(t.ctrlKey||t.metaKey)&&t.key==="x"&&(t.preventDefault(),await this.copyImageToClipboard()&&(this.deleteImage(this.img),this.hide())))};deleteImage=t=>{window.Quill.find(t).deleteAt(0)}};window.Quill&&window.Quill.register("modules/imageResize",K);})();
